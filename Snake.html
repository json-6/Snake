<!DOCTYPE html>
<html>
<body>


<H1 align="center">
<canvas id="canvas" width="400" height="400" style="border:10px solid #FFA500;">
	Your browser does not support the HTML5 canvas tag.
</canvas>

<!--
<embed height="0" width="0" src="test.mp3">
//audio if wanted
-->
<img src="images/snake_body.png" alt="Snake body image" width="9" height="9" id="snake_body" style="display:none" />
<img src="images/snake_tail.png" alt="Snake tail image" width="9" height="9" id="snake_tail" style="display:none" />
<img src="images/snake_head.png" alt="Snake head image" width="9" height="9" id="snake_head" style="display:none" />
<img src="images/heart.jpg" alt="heart" width="9" height="9" id="heart" style="display:none" />
<script>

var c=document.getElementById('canvas');
var ctx=c.getContext('2d');

var SnakeArray=new Array(); //array to hold snake bit objects
var SnakeTail=-1;				//Most recently added SnakeBit
var d="right";  				//direction
var delay=100;					//refresh rate (in milliseconds)
var score = 0; //current score
var food=new Object();


window.onload = function(){SnakeInit(); updateScore();};

function updateScore(){
  score = score + 1; //update score as each second passes 
	setTimeout(function(){updateScore();},1000); //call again to update score
}

function printScore() {
  ctx.fillStyle = '#808080'; //gray
  ctx.font = 'bold 12px sans-serif';
  ctx.textBaseline = 'bottom';
  ctx.fillText('score: ' + score, 4, 398); //display in lower left hand corner
}

function SnakeInit(){
score = 0; //reset score to 0	
	SnakeTail=-1;				//Most recently added SnakeBit
	d="right";  				//direction
	for(i=5;i>=0;i--){
		addSnakeBit(i*10,0);	
	}
	makeFood();
	paint();
}
function addSnakeBit(nx, ny){	         //adds a new snake bit
	SnakeArray[++SnakeTail]=new Object();
	SnakeArray[SnakeTail].x=nx;
	SnakeArray[SnakeTail].y=ny;
}

function getRandomArbitary (min, max) {
    return Math.floor(Math.random() * (max - min) + min);
}
function makeFood(){
	food.x= getRandomArbitary(0,40)*10;
	food.y= getRandomArbitary(0,40)*10;
}
function printFood(){
	var img_heart = document.getElementById('heart'); //snake head
	ctx.drawImage(img_heart, food.x, food.y, 9, 9);
}

function printPopup(){
  var cx = canvas.width/2;
  var cy = canvas.height/2;
  ctx.fillStyle = '#4A4FFF';
  ctx.font = 'bold 50px sans-serif';
  ctx.textBaseline = 'bottom';
  ctx.textAlign = 'center';
  ctx.fillText('Good job!', cx, cy); //add a personalized random message later
}

function paint(){        				//clears screen and repaints snake in new position	
	ctx.clearRect(0, 0, canvas.width, canvas.height);
	printFood();	
	printSnake();			
	printScore();
}
function moveSnake(){
	for(i=SnakeTail; i>0; i--){
		SnakeArray[i].x=SnakeArray[i-1].x;
		SnakeArray[i].y=SnakeArray[i-1].y;
	}
	if(d==="right"){SnakeArray[0].x=SnakeArray[0].x+10;}
	if(d==="up"){SnakeArray[0].y=SnakeArray[0].y-10;}
	if(d==="left"){SnakeArray[0].x=SnakeArray[0].x-10;}
	if(d==="down"){SnakeArray[0].y=SnakeArray[0].y+10;}
	if(SnakeArray[0].x<0||SnakeArray[0].x>=400||SnakeArray[0].y<0||SnakeArray[0].y>=400){
		deleteSnake();
	}	
	else if(food.x === SnakeArray[0].x && food.y === SnakeArray[0].y){
		score=score+20;
		addSnakeBit();
		makeFood();
		paint();
	}
	else{
		paint();
	}
}
function deleteSnake(){
	for(i=0; i<SnakeTail;i++){
		delete SnakeArray[i];
	}
	SnakeInit();
}
function printSnake(){	
var img_snake = document.getElementById('snake_body'); //get snake image
var img_snake_tail = document.getElementById('snake_tail'); //snake tail
var img_snake_head = document.getElementById('snake_head'); //snake head
	for (i=0;i<SnakeTail;i++)
	{ 		
		if(i === 0){
			ctx.drawImage(img_snake_head, SnakeArray[i].x, SnakeArray[i].y, 9, 9);
		}
		else if (i === SnakeTail - 1 ){ //at tail, SnakeTail -1
			ctx.drawImage(img_snake_tail, SnakeArray[i].x, SnakeArray[i].y, 9, 9);
		}
		else{
			ctx.drawImage(img_snake, SnakeArray[i].x, SnakeArray[i].y, 9, 9);
		}
    }
	setTimeout(function(){moveSnake();},delay)
}

function counterClockwise(){
	if(d==="right"){
		d="up";
	}
	else if(d==="down"){
		d="right";
	}
	else if(d==="left"){
		d="down";
	}
	else if(d==="up"){
		d="left";
	}

}
function clockwise()
{
	if(d==="right"){
		d="down";
	}
	else if(d==="down"){
		d="left";
	}
	else if(d==="left"){
		d="up";
	}
	else if(d==="up"){
		d="right";
	}
}
</script>
<br>
 <img id="leftImage" onclick="counterClockwise()"			
src="images/left.jpg" width="100" height="70"><!--buttons for control-->

&nbsp;&nbsp;&nbsp;

<img id="rightImage" onclick="clockwise()"
src="images/right.jpg" width="100" height="70"></H1>

</body>
</html>
